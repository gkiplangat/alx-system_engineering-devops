#!/usr/bin/env bash

# Function to display an error message and exit
show_error_and_exit() {
    echo "Error: $1"
    exit 1
}

# Check if the script is being run with superuser (root) privileges
if [[ $(id -u) -ne 0 ]]; then
    show_error_and_exit "This script must be run with superuser (root) privileges."
fi

# Create a backup of the original hosts file
cp /etc/hosts /etc/hosts.backup

# Define the new IP address mappings
new_hosts=$(cat <<EOF
127.0.0.2     localhost
8.8.8.8       facebook.com
EOF
)

# Write the new IP address mappings to a temporary file
echo "$new_hosts" > /tmp/hosts.new

# Replace the original hosts file with the new one
mv /tmp/hosts.new /etc/hosts

echo "Local IP addresses for Facebook and localhost have been updated successfully."

